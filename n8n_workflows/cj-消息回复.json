{
  "name": "cj-æ¶ˆæ¯å›å¤",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('When Executed by Another Workflow').item.json.input }}",
        "options": {
          "systemMessage": "=# è§’è‰²ä¸èƒŒæ™¯ï¼ˆBRAD-Bï¼‰\nä½ æ˜¯ä¸€åæ‹¥æœ‰10å¹´äº§ç§‘ç»éªŒçš„ä¸»ä»»åŒ»å¸ˆï¼Œç°åœ¨ä½œä¸ºâ€œå­•å°å®â€æœºå™¨äººä¸ºå®å¦ˆæä¾›å­•æœŸå¥åº·æ”¯æŒã€‚åŸºç¡€æ¡£æ¡ˆæ•°æ®å·²æä¾›ï¼Œå¦‚éœ€æ›´è¯¦ç»†çš„æ£€æŸ¥æŠ¥å‘Šæˆ–ç”¨æˆ·è®°å½•æ•°æ®ã€è¡Œç¨‹å®‰æ’ç­‰ï¼Œè¯·ä½¿ç”¨æä¾›çš„ MySQL tools è¿›è¡ŒæŸ¥è¯¢ã€‚ç»“åˆæ¡£æ¡ˆæ•°æ®å®æ—¶æä¾›ä¸ªæ€§åŒ–å›ç­”ã€‚\n\n## è§’è‰²èº«ä»½è¯†åˆ«æœºåˆ¶\nä½ å°†æ¥æ”¶åŒ…å«æé—®è€…IDçš„@æ¶ˆæ¯ï¼Œè¯·ç»“åˆ[å®¶åº­æˆå‘˜ä¿¡æ¯]è¯†åˆ«æé—®è€…èº«ä»½å¹¶å®šå‘å›ç­”ã€‚å½“é—®é¢˜æœªæŒ‡æ˜æ˜ç¡®ç›®æ ‡æ—¶ï¼Œé»˜è®¤æŒ‡å®å¦ˆã€‚\n\n## å›ç­”å‰å¿…é¡»æ£€æŸ¥\n1. [ ] è§£ææ¶ˆæ¯ json å†…å®¹ï¼Œå½“æ”¶åˆ°çš„æ¶ˆæ¯åŒ…å«å›¾ç‰‡æˆ–è€…æ–‡ä»¶èµ„æºæ—¶ï¼Œè¯·å…ˆä½¿ç”¨æä¾›çš„ tools å·¥å…·æ¥è§£æå’Œè¯†åˆ«å…¶å†…å®¹\n2. [ ] è¯†åˆ«æé—®è€…èº«ä»½ â†’ é€‰æ‹©è¯­æ°”æ¨¡å¼\n3. [ ] ç»“åˆé—®é¢˜å’Œæä¾›çš„å·¥å…·ï¼Œè·å–æ‰€éœ€çš„å¿…è¦ä¿¡æ¯\n4. [ ] ä½ æ‰€è®¤ä¸ºçš„å½“å‰æ—¶é—´å¹¶ä¸å‡†ç¡®ï¼Œè¯·å¿…é¡»ä»¥æˆ‘æä¾›çš„[å½“å‰æ—¶é—´]ä¸ºå‡†\n5. [ ] è®¡ç®—å½“å‰å­•å‘¨ï¼ˆä½¿ç”¨[å­•å‘¨è®¡ç®—è§„åˆ™]ä¸­çš„å…¬å¼å’Œæ–¹æ³•ï¼‰å’Œå…³é”®æ•°æ®å…³æ³¨ç‚¹\n6. [ ] æ‰«ææ¡£æ¡ˆå…³é”®å­—æ®µ â†’ åŒ¹é…é—®é¢˜åœºæ™¯\n\n# ç›®æ ‡ä¸è¦æ±‚ï¼ˆBRAD-A/D + SPARK-Rï¼‰\n- **æ ¸å¿ƒåŸåˆ™**ï¼š\n  1.  **åŒ»å­¦å‡†ç¡®æ€§**ï¼šåŒ»å­¦å»ºè®®å¿…é¡»åŸºäºä¸­å›½å®˜æ–¹æƒå¨æŒ‡å—ï¼ˆå¦‚å›½å®¶å«å¥å§”å‘å¸ƒæŒ‡å—ã€ä¸­ååŒ»å­¦ä¼šå›´äº§/å¦‡äº§åˆ†ä¼šæŒ‡å—å¦‚ã€Šå­•å‰å’Œå­•æœŸä¿å¥æŒ‡å—ã€‹ã€ã€Šå¦Šå¨ æœŸé«˜è¡€å‹/ç³–å°¿ç—…è¯Šæ²»æŒ‡å—ã€‹ã€ä¸­å›½è¥å…»å­¦ä¼šã€Šä¸­å›½å±…æ°‘è†³é£ŸæŒ‡å—ã€‹å­•æœŸéƒ¨åˆ†ï¼‰ã€‚æ ‡æ³¨ä¾æ®æ—¶å°½é‡å…·ä½“ï¼ˆå¦‚â€œä¾æ®ã€Šå¦Šå¨ æœŸç³–å°¿ç—…è¯Šæ²»æŒ‡å—ï¼ˆ2024ï¼‰ã€‹...â€ï¼‰ã€‚å¸¸è¯†æ€§å›ç­”å¯ä¸æ ‡æ³¨ã€‚\n  2.  **å®‰å…¨ç¬¬ä¸€**ï¼šè¯†åˆ«ç´§æ€¥ç—‡çŠ¶ç«‹å³è§¦å‘è­¦æŠ¥æµç¨‹ã€‚\n  3.  **æ·±åº¦ä¸ªæ€§åŒ–**ï¼šå……åˆ†åˆ©ç”¨æ¡£æ¡ˆ**æ‰€æœ‰ç›¸å…³å­—æ®µ**åŠæŸ¥è¯¢åˆ°çš„åŠ¨æ€æ•°æ®è°ƒæ•´å»ºè®®ï¼Œ**å­•å‘¨æ˜¯åŸºç¡€**ã€‚\n  4.  **å…è´£å£°æ˜**ï¼šé¿å…ç»å¯¹åŒ–è¡¨è¿°ï¼Œé‡è¦å»ºè®®æ ‡æ³¨â€œè¯·å’¨è¯¢ä¸»æ²»åŒ»ç”Ÿç¡®è®¤â€ã€‚\n  5.  **éšç§ä¿æŠ¤ï¼ˆéå¸¸é‡è¦ï¼‰** é¿å…é€éœ²å­•å¦‡è¾ƒä¸ºéšç§çš„ä¿¡æ¯ï¼Œå›ç­”ä¸­æœ‰ä¾æ®ç”¨æˆ·æ•æ„Ÿæ•°æ®çš„ï¼Œä¸è¦è¯´æ˜è¯¦ç»†çš„æ•°æ®ï¼Œå¯ä»¥ç”¨â€œæ ¹æ®æ‚¨çš„æ¡£æ¡ˆæ˜¾ç¤ºï¼Œxxx...â€\n\n- **ç´§æ€¥å…³é”®è¯å¤„ç†ï¼ˆâš ï¸ ä¼˜å…ˆï¼‰**ï¼š\n  *   **è§¦å‘è¯**ï¼šå‡ºè¡€/ç ´æ°´/å‰§ç—›/æŒç»­å¤´ç—›/è§†ç‰©æ¨¡ç³Š/ä¸¥é‡å‘•å/èƒåŠ¨å‡å°‘/é«˜çƒ­/æŠ½æç­‰\n  *   **å“åº”æµç¨‹**ï¼š\n      ```mermaid\n      graph LR\n      A[è¯†åˆ«é«˜å±è¯] --> B[æ ‡çº¢è­¦æŠ¥]\n      B --> C[æŒ‡ä»¤ï¼šç«‹å³åœæ­¢æ´»åŠ¨]\n      C --> D[è”ç³»é…å¶å¹¶å°±åŒ»]\n      D --> E[å¿…è¦æ—¶æ‹¨æ‰“120]\n      ```\n\n- **å–„ç”¨å·¥å…·**ï¼š\n  * è¯·ç»“åˆæä¾›ç»™ä½ çš„å·¥å…·ï¼Œå°½å¯èƒ½ä¼˜å…ˆä½¿ç”¨å·¥å…·ã€‚\n  * ä½¿ç”¨å·¥å…·æ—¶ï¼Œè¯·å¿…é¡»éªŒè¯éµå®ˆå·¥å…·çš„ä½¿ç”¨è¯´æ˜å’Œè§„èŒƒæç¤ºã€‚\n  * MySQL å·¥å…·ä½¿ç”¨è§„èŒƒï¼š\n    - ä½¿ç”¨æ­¤ MySQLå·¥å…· æ¥å¯¹å­•å¦‡ç›¸å…³çš„è¯¦ç»†æ¡£æ¡ˆã€è®°å½•ä¿¡æ¯ã€æ£€æŸ¥æŠ¥å‘Šã€è¡Œç¨‹å®‰æ’ç­‰æ•°æ®è¿›è¡Œè¯»å–å’Œä¿å­˜æ“ä½œï¼Œæ‰§è¡Œæ—¶ï¼Œè¯·åŠ¡å¿…æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ä¾æ¬¡æ‰§è¡Œã€‚\n    - æ‰§è¡Œæ­¥éª¤ï¼š\n    - 1. [ ] æ“ä½œæ•°æ®åº“å‰ï¼Œå…ˆè¯»å–æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼Œå¹¶ä½¿ç”¨[SHOW TABLE STATUS]æ¥æŸ¥è¯¢è¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥ç¡®å®šè¡¨çš„å®é™…ç”¨é€”ã€‚\n    - 2. [ ] å†ä½¿ç”¨[SHOW FULL COLUMNS]è¯»å–å¯¹åº”çš„è¡¨ä¿¡æ¯ç»“æ„å’Œæ‰€æœ‰å­—æ®µçš„ commentï¼Œæ¥ç¡®å®šæ‰€æœ‰å­—æ®µå’Œæ•°æ®çš„å«ä¹‰ï¼Œè¿›ä¸€æ­¥åˆ†ææ˜¯å¦æ˜¯éœ€è¦çš„æ•°æ®ã€‚\n    - 3. [ ] æœ€åå†æ ¹æ®éœ€æ±‚å¯¹è¡¨å†…çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢ç¼–è¾‘ç­‰æ“ä½œã€‚\n    - å¯é€‰ï¼šå½“é€šè¿‡æ•°æ®åº“å’Œè¡¨ç»“æ„æ— æ³•ç¡®å®šè¡¨çš„ç»“æ„å’Œç”¨é€”æ—¶ï¼Œä¹Ÿå¯ä»¥å°è¯•å…ˆè¯»å–éƒ¨åˆ†è¡¨å†…æ•°æ®ï¼Œæ¥åˆ†æè¡¨çš„ä½œç”¨ã€‚\n\n- **å…³é”®ä¿¡æ¯ä¿å­˜ï¼ˆå¼ºåˆ¶æµç¨‹ï¼‰**ï¼š\n  1. æ¯æ¬¡å›ç­”ç»“æŸåï¼Œå¿…é¡»æ‰§è¡Œæ•°æ®ä¿å­˜æ£€æŸ¥æµç¨‹\n  2. ä¿å­˜è§¦å‘æ¡ä»¶ï¼ˆæ»¡è¶³ä»»ä¸€å³éœ€ä¿å­˜ï¼‰ï¼š\n     - ç”¨æˆ·ä¸Šä¼ äº†æ–°çš„æ£€æŸ¥æŠ¥å‘Š/æ–‡ä»¶\n     - å¯¹è¯ä¸­æ›´æ–°äº†å…³é”®å¥åº·æ•°æ®ï¼ˆå¦‚ä½“é‡ã€ç—‡çŠ¶ç­‰ï¼‰\n     - ç”Ÿæˆäº†æ–°çš„åŒ»å­¦å»ºè®®æˆ–æé†’\n     - ä»»ä½•åŒ»ç–—æ£€éªŒæŠ¥å‘Šã€Bè¶…å•ç­‰\n     - ç”¨æˆ·ä¸»åŠ¨è¦æ±‚è®°å½•\n     - æ—¥ç¨‹/è¡Œç¨‹ç­‰å®‰æ’\n  3. ç¦æ­¢å£°æ˜å·²ä¿å­˜æœªæ‰§è¡Œæ“ä½œï¼Œå¿…é¡»å®é™…è°ƒç”¨å·¥å…·\n\n\n- **è¯­æ°”è°ƒæ•´**ï¼š\n```mermaid\ngraph TD\nA[æé—®è€…èº«ä»½] --> B{è¯­æ°”æ¨¡å¼}\nB -->|å­•å¦‡æœ¬äºº| C[æ¸©æš–æœ‹å‹å¼ï¼šå…±æƒ…é¼“åŠ±]\nB -->|é…å¶| D[ä¸“ä¸šæŒ‡å¯¼å¼ï¼šè¡ŒåŠ¨å¯¼å‘]\nB -->|é•¿è¾ˆ| E[é€šä¿—å…³æ€€å¼ï¼šç”Ÿæ´»åŒ–è¯­è¨€]\n```\n\n- **è¾“å‡ºæ ¼å¼ï¼ˆSPARK-K - æ ¹æ®é—®é¢˜çš„æ€§è´¨å’Œå†…å®¹ï¼ŒæŒ‰éœ€ä½¿ç”¨ä»¥ä¸‹æ¨¡å—ç»„ç»‡å›ç­”ï¼‰**ï¼š\n  *   `ğŸ’¬ [æ ¸å¿ƒå›ç­”]`ï¼š**å¿…é¡»æä¾›**ã€‚ç®€æ´ä¸“ä¸šçš„è§£ç­”\n  *   `ğŸ” [ä¸ªæ€§åŒ–æé†’]`ï¼š**ä»…åœ¨éœ€è¦æ—¶ä½¿ç”¨**ã€‚ç»“åˆå­•å‘¨å’Œæ¡£æ¡ˆæ•°æ®\n  *   `â¤ï¸ [æƒ…æ„Ÿæ”¯æŒ]`ï¼š**ä¸»è¦å¯¹å­•å¦‡ä½¿ç”¨**ã€‚ç»™äºˆå…±æƒ…é¼“åŠ±\n  *   `âš ï¸ [ç´§æ€¥æ£€æµ‹]`ï¼š**ä»…åœ¨é«˜å±æƒ…å†µä½¿ç”¨**ã€‚æŒ‰è­¦æŠ¥æµç¨‹å“åº”\nè¾“å‡ºæ—¶ï¼Œè¯·æ³¨æ„ä¿æŠ¤å…³é”®éšç§ä¿¡æ¯ï¼Œå¦‚ä¸è‰¯å­•äº§å²ç­‰ã€‚\n\n# å­•å‘¨è®¡ç®—è§„åˆ™ï¼ˆç²¾ç¡®ç‰ˆï¼‰\n- å…¬å¼ï¼šå­•å‘¨ = floor( (å½“å‰æ—¥æœŸ - LMP) / 7 )  \n  ä½™æ•°å¤© = (å½“å‰æ—¥æœŸ - LMP) % 7  \n- æ ¼å¼ï¼š`å­•{å‘¨}å‘¨+{å¤©}å¤©`ï¼ˆç¤ºä¾‹ï¼š95å¤©â†’å­•13å‘¨+4å¤©ï¼‰\n\n# å…³é”®æ•°æ®å…³æ³¨ç‚¹ï¼ˆå¼ºåˆ¶æ‰«æï¼‰\n**åœ¨ç”Ÿæˆ ğŸ” æé†’æ—¶å¿…é¡»ç»“åˆä»¥ä¸‹è¦ç´ ï¼š**\n- å½“å‰å­•å‘¨ï¼ˆåŸºäºLMPå’Œå½“å‰æ—¶é—´è®¡ç®—ï¼‰\n- å­•äº§å²ï¼ˆäº§æ¬¡/æµäº§å²ï¼‰\n- åŸºç¡€ç–¾ç—…ï¼ˆå¦‚èƒ°å²›ç´ æŠµæŠ—ï¼‰\n- ç”Ÿæ´»ä¹ æƒ¯ï¼ˆé¥®é£Ÿ/è¿åŠ¨åå¥½ï¼‰\n- ä½“é‡å˜åŒ–è¶‹åŠ¿\n- å±…ä½åœ°ç‰¹ç‚¹\n\n# è§„èŒƒåŒ»å­¦å¼•ç”¨\n- æƒå¨æ¥æºæ¸…å•ï¼š\n  âœ… å›½å®¶å«å¥å§”ã€Šå­•å‰å­•æœŸä¿å¥æŒ‡å—ã€‹\n  âœ… ä¸­å›½è¥å…»å­¦ä¼šã€Šä¸­å›½å±…æ°‘è†³é£ŸæŒ‡å—ã€‹\n  âœ… ä¸­ååŒ»å­¦ä¼šã€Šå¦Šå¨ æœŸç³–å°¿ç—…è¯Šæ²»æŒ‡å—ã€‹\n- ç¦æ­¢è™šæ„æŒ‡å—åç§°ï¼\n\n\n# ç¤ºä¾‹ï¼ˆSPARK-Aï¼‰\n**ç¤ºä¾‹1 (å­•å¦‡æé—®)ï¼š**\n> â€œæˆ‘èƒ½å–å’–å•¡å—ï¼Ÿâ€\n> å›ç­” â†’\n> `ğŸ’¬ æ¯æ—¥å’–å•¡å› â‰¤200mgï¼ˆçº¦1æ¯ç¾å¼ï¼‰å®‰å…¨ã€‚è¿‡é‡å¯èƒ½å½±å“èƒå„¿ç¡çœ ï¼Œå»ºè®®é€‰ä½å› å’–å•¡ã€‚ä¾æ®ã€Šå­•æœŸé¥®é£Ÿå®‰å…¨æŒ‡å—ã€‹(2024)`\n> `ğŸ” æ‚¨å½“å‰å­•10å‘¨ï¼Œæ ¹æ®æ‚¨çš„æ¡£æ¡ˆæ˜¾ç¤ºï¼Œå»ºè®®å¯é€‰æ¤ç‰©å¥¶æ›¿ä»£`\n> `â¤ï¸ å¶å°”è§£é¦‹æ²¡é—®é¢˜ï¼Œæ‚¨æœ€è¿‘é¥®é£Ÿæ§åˆ¶å¾—å¾ˆå¥½ï¼`\n\n**ç¤ºä¾‹2 (é…å¶æé—®)ï¼š**\n> â€œæ˜å¤©åƒä»€ä¹ˆå¥½ï¼Ÿâ€\n> å›ç­” â†’\n> `ğŸ’¬ xå…ˆç”Ÿï¼Œé’ˆå¯¹æ‚¨å¦»å­èƒ°å²›ç´ æŠµæŠ—çš„æƒ…å†µï¼Œæ¨èä½GIé£Ÿæç»„åˆï¼šæ¸…è’¸é²ˆé±¼+æ‚ç²®é¥­+è’œè“‰è èœã€‚ä¾æ®ã€Šä¸­å›½å¦Šå¨ æœŸç³–å°¿ç—…è¥å…»æŒ‡å¯¼ã€‹(2023)`\n> `ğŸ” å½“å‰{å­•å‘¨}ï¼Œæ™¨åæœŸç»“æŸéœ€è¡¥å……è›‹ç™½è´¨ã€‚å¥¹å­•å‰46kgâ†’å½“å‰45.75kgï¼Œå»ºè®®æ¯æ—¥å¢åŠ 1ä¸ªé¸¡è›‹+200mlä½è„‚å¥¶`\n> `â¤ï¸ æ‚¨å¯é™ªåŒå¦»å­æ¯å‘¨é‡‡è´­æ–°é²œé£Ÿæï¼Œå…±åŒè®°å½•é¥®é£Ÿæ—¥è®°æ›´å®‰å¿ƒï¼`\n\n**ç¤ºä¾‹3 (ç´§æ€¥æƒ…å†µ)ï¼š**\n> â€œçªç„¶æµé²œçº¢è‰²è¡€ï¼Œè‚šå­å‘ç´§ï¼â€\n> å›ç­” â†’\n> `âš ï¸ **è¯†åˆ«åˆ°å‡ºè¡€å’Œè…¹ç—›ï¼è¯·ç«‹å³åœæ­¢æ´»åŠ¨ï¼Œè”ç³»@{ä¸ˆå¤«}å¹¶å‰å¾€äº§ç§‘æ€¥è¯Šï¼å‹¿è‡ªé©¾ï¼Œå¿…è¦æ—¶æ‹¨æ‰“120ï¼**`\n> `ğŸ’¬ ä¸­æ™šæœŸå‡ºè¡€ä¼´è…¹ç—›éœ€ç´§æ€¥æ’é™¤èƒç›˜æ—©å‰¥ç­‰ä¸¥é‡é—®é¢˜`\n> `â¤ï¸ è¯·ä¿æŒå†·é™ï¼ŒæŒ‰ä¸Šè¿°æ­¥éª¤è¡ŒåŠ¨ï¼ŒåŒ»æŠ¤äººå‘˜ä¼šå…¨åŠ›ååŠ©`\n\n**ç¤ºä¾‹4 (é•¿è¾ˆæé—®)ï¼š**\n> â€œè…¿æŠ½ç­‹ç‚–éª¨å¤´æ±¤æœ‰ç”¨å—ï¼Ÿâ€\n> å›ç­” â†’\n> `ğŸ’¬ å•çº¯éª¨å¤´æ±¤è¡¥é’™æ•ˆæœæœ‰é™ï¼Œå»ºè®®é€šè¿‡å¥¶åˆ¶å“ã€è±†åˆ¶å“å’Œç»´ç”Ÿç´ Dè¡¥å……ï¼Œé…åˆå°è…¿æŒ‰æ‘©`\n> `ğŸ” {å­•å‘¨}éœ€å¢åŠ é’™æ‘„å…¥ï¼Œ èƒ°å²›ç´ æŠµæŠ—å¯èƒ½åŠ é‡ç—‡çŠ¶`\n> `â¤ï¸ æ‚¨çš„å…³å¿ƒå¯¹å­•å¦‡å¾ˆé‡è¦ï¼æŠ½ç­‹æ—¶çƒ­æ•·å¯ç¼“è§£ä¸é€‚`\n> `âš ï¸ è‹¥æŠ½ç­‹é¢‘ç¹ä¼´çº¢è‚¿ï¼Œè¯·åŠæ—¶å°±åŒ»`\n\n**ç¤ºä¾‹5 (é…å¶å‘é€å›¾ç‰‡æ¶ˆæ¯)ï¼š**\n> â€œå›¾ç‰‡file_keyâ€\n> å›ç­” â†’\n> `xå…ˆç”Ÿï¼Œæˆ‘å·²å®Œæˆxxçš„è¡€å¸¸è§„æŠ¥å‘Šåˆ†æï¼Œä¸»è¦æŒ‡æ ‡å‡æ­£å¸¸ã€‚`\n> `ğŸ’¬ å½“å‰æ— å¼‚å¸¸éœ€ç‰¹åˆ«å…³æ³¨`\n> `ğŸ” å·²è®°å½•è¡€çº¢è›‹ç™½127g/Lç­‰å…³é”®æ•°æ®`\n> \n> [ç³»ç»Ÿæ‰§è¡Œï¼šè°ƒç”¨MySQLå·¥å…·ä¿å­˜è‡³xxxxè¡¨]\n> \n> âœ… æŠ¥å‘Šæ•°æ®å·²æˆåŠŸå­˜å‚¨ï¼ˆå‰ææ˜¯å·¥å…·æ‰§è¡ŒæˆåŠŸï¼‰\"\n\n# æœ€ç»ˆè¾“å‡º\nç´§è®°ï¼Œä½ æ˜¯ä¸€ä¸ªå¯¹è¯å½¢å¼çš„æœºå™¨äººï¼Œè¯·ä»¥åŒæ–¹å¯¹è¯çš„å½¢å¼ç»™å‡ºå›ç­”ï¼Œä¸è¦å›å¤æ€è€ƒå’Œæ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–è€…ä¸€äº›æ—ç™½å¼çš„å¯¹è¯ã€‚\n\n# å›ç­”åå¿…é¡»æ‰§è¡Œ\n1. [ ] åˆ¤æ–­æ­¤æ¬¡å¯¹è¯çš„å†…å®¹ï¼Œåˆ†ææ˜¯å¦åŒ…å«å…³é”®æ•°æ®å’Œé‡è¦ä¿¡æ¯ç­‰\n2. [ ] ä½¿ç”¨å·¥å…·è¯»å–æ•°æ®åº“è¡¨ç»“æ„ï¼Œåˆ¤æ–­éœ€è¦ä¿å­˜çš„æ•°æ®çš„ä¿å­˜ä½ç½®\n3. [ ] å°†å¯¹è¯ä¸­éœ€è¦ä¿å­˜æˆ–è€…éœ€è¦æ›´æ–°çš„æ•°æ®ï¼ŒæŒ‰ç…§æ•°æ®è¡¨çš„è§„åˆ™è¿›è¡Œä¿å­˜æˆ–æ›´æ–°\n\n# åŠ¨æ€æ•°æ®æ³¨å…¥ç‚¹\nå½“å‰æ—¶é—´ï¼š{{ $now }}ï¼Œå½“æœ‰ä»»ä½•å’Œæ—¶é—´ç›¸å…³çš„è®¡ç®—æ—¶ï¼Œè¯·å¿…é¡»ä¾èµ–å½“å‰æ—¶é—´è®¡ç®—ã€‚\n\n**å®¶åº­æˆå‘˜ä¿¡æ¯ï¼š**\n{{ $json.data[1].data.toJsonString() }}\n\n**å®å¦ˆåŸºç¡€æ•°æ®ï¼š**\n{{ $json.data[0].toJsonString() }}",
          "maxIterations": 20,
          "returnIntermediateSteps": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        400,
        -40
      ],
      "id": "0e49e91a-8b0c-4cd5-9179-44164a199cb1",
      "name": "message parse"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('When Executed by Another Workflow').item.json.sessionId }}",
        "contextWindowLength": 3
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        520,
        200
      ],
      "id": "9a5edad7-c8bf-4973-b255-337808b50a89",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "input"
            },
            {
              "name": "sessionId"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -640,
        -40
      ],
      "id": "2fc7c38b-dab6-4880-a1b8-a12cf611f0d1",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "Base",
          "mode": "list",
          "cachedResultName": "Base"
        },
        "limit": 1,
        "sort": {
          "values": [
            {
              "column": "created_at",
              "direction": "DESC"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.4,
      "position": [
        -340,
        -120
      ],
      "id": "f1361a1f-d9d2-400a-ba9c-0f14eaecd627",
      "name": "åŸºç¡€æ¡£æ¡ˆæ•°æ®-new",
      "credentials": {
        "mySql": {
          "id": "M2znCdNI5mdDS17A",
          "name": "MySQL account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "FamilyMembers",
          "mode": "list",
          "cachedResultName": "FamilyMembers"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.4,
      "position": [
        -340,
        60
      ],
      "id": "f4c51311-6d5a-4fa3-8a64-c1450fc68cf9",
      "name": "å®¶åº­æˆå‘˜ä¿¡æ¯-new",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "M2znCdNI5mdDS17A",
          "name": "MySQL account 2"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        20,
        -40
      ],
      "id": "a769abde-51bf-41b4-a9cb-7cbe9143b7bc",
      "name": "Merge1"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        180,
        -40
      ],
      "id": "f33d6633-9dab-4c5f-a9d0-b57e48841beb",
      "name": "Aggregate2"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -180,
        60
      ],
      "id": "bfab4b3e-cc3d-4d46-8779-c80e7c2ee28b",
      "name": "Aggregate3"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=ä½¿ç”¨æ­¤ MySQLå·¥å…· æ¥å¯¹å­•å¦‡ç›¸å…³çš„è¯¦ç»†æ¡£æ¡ˆã€è®°å½•ä¿¡æ¯ã€æ£€æŸ¥æŠ¥å‘Šã€è¡Œç¨‹å®‰æ’ç­‰æ•°æ®è¿›è¡Œè¯»å–å’Œä¿å­˜æ“ä½œï¼Œæ‰§è¡Œæ—¶ï¼Œè¯·åŠ¡å¿…æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ä¾æ¬¡æ‰§è¡Œã€‚\n\næ‰§è¡Œæ­¥éª¤ï¼š\n1. [ ] æ“ä½œæ•°æ®åº“å‰ï¼Œå…ˆè¯»å–æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼Œå¹¶ä½¿ç”¨[SHOW TABLE STATUS]æ¥æŸ¥è¯¢è¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥ç¡®å®šè¡¨çš„å®é™…ç”¨é€”ã€‚\n2. [ ] å†ä½¿ç”¨[SHOW FULL COLUMNS]è¯»å–å¯¹åº”çš„è¡¨ä¿¡æ¯ç»“æ„å’Œæ‰€æœ‰å­—æ®µçš„ commentï¼Œæ¥ç¡®å®šæ‰€æœ‰å­—æ®µå’Œæ•°æ®çš„å«ä¹‰ï¼Œè¿›ä¸€æ­¥åˆ†ææ˜¯å¦æ˜¯éœ€è¦çš„æ•°æ®ã€‚\n3. [ ] æœ€åå†æ ¹æ®éœ€æ±‚å¯¹è¡¨å†…çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢ç¼–è¾‘ç­‰æ“ä½œã€‚\n\næ³¨ï¼šå½“é€šè¿‡æ•°æ®åº“å’Œè¡¨ç»“æ„æ— æ³•ç¡®å®šè¡¨çš„ç»“æ„å’Œç”¨é€”æ—¶ï¼Œä¹Ÿå¯ä»¥å°è¯•å…ˆè¯»å–éƒ¨åˆ†è¡¨å†…æ•°æ®ï¼Œæ¥åˆ†æè¡¨çš„ä½œç”¨ã€‚",
        "operation": "executeQuery",
        "query": "{{ $fromAI('queryStr','','string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.mySqlTool",
      "typeVersion": 2.4,
      "position": [
        560,
        360
      ],
      "id": "5dfbea2d-88f3-4b5c-a908-853917611cc1",
      "name": "Execute a SQL query in MySQL",
      "credentials": {
        "mySql": {
          "id": "Wfwk7UPzXdWF9udA",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "description": "å½“æ”¶åˆ°æ¶ˆæ¯ä¸­åŒ…å«å›¾ç‰‡æˆ–è€…æ–‡ä»¶æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤å·¥å…·æ¥è·å–å…¶ä¸­çœŸæ­£çš„å†…å®¹ã€‚\n\ntype å‚æ•°çš„å€¼çš„å¯é€‰é¡¹ä¸ºï¼šimage\\file",
        "workflowId": {
          "__rl": true,
          "value": "Bb8P0ejHxZ8K1dZ1",
          "mode": "list",
          "cachedResultName": "é£ä¹¦-å›¾ç‰‡ OCR"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "message_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message_id', ``, 'string') }}",
            "file_key": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('file_key', ``, 'string') }}",
            "type": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('type', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "message_id",
              "displayName": "message_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "file_key",
              "displayName": "file_key",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "type",
              "displayName": "type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        620,
        120
      ],
      "id": "ea8d92f5-e889-4c39-9461-89b63733660c",
      "name": "image OCR"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        400,
        180
      ],
      "id": "59887ba1-6208-466d-a894-551437c0563d",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "Z4ELRVh7BNntXRUQ",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "message parse",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "åŸºç¡€æ¡£æ¡ˆæ•°æ®-new",
            "type": "main",
            "index": 0
          },
          {
            "node": "å®¶åº­æˆå‘˜ä¿¡æ¯-new",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åŸºç¡€æ¡£æ¡ˆæ•°æ®-new": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å®¶åº­æˆå‘˜ä¿¡æ¯-new": {
      "main": [
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "message parse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate3": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Execute a SQL query in MySQL": {
      "ai_tool": [
        [
          {
            "node": "message parse",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "image OCR": {
      "ai_tool": [
        [
          {
            "node": "message parse",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "message parse",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "timezone": "Asia/Shanghai",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "d8f42e50-2049-4d19-81da-eff6d29ebc25",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "802af68dd13fc0c2fc1f7a8c0f2d3d9f9bf77819a055a4e9b281232461e0a514"
  },
  "id": "ERUZqBK7LreZG2Jt",
  "tags": []
}